<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="/public/css/task.css">
</head>

<body>

    <%- include('header') %>
        <div id="body">
            <div class="container">
                <div class="d-flex justify-content-between" style="color: rgba(229, 226, 226, 0.89);">
                    <h5>Project name: abcde</h5>
                    <div>

                        <button type="button" class="btn-top btn btn-primary mx-2">
                            Total tasks: <span class="badge bg-secondary">
                                <%=listData.length%>
                            </span>
                            <span class="visually-hidden">unread messages</span>
                        </button>
                        <button type="button" class="btn-top btn btn-primary  mx-2">
                            Total users: <span class="badge bg-secondary">9</span>
                            <span class="visually-hidden">unread messages</span>
                        </button>

                        <button class=" btn-top btn btn-success  mx-2" data-bs-toggle="modal" data-bs-target="#add-users"><svg
                                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-plus-lg" viewBox="0 0 16 16">
                                <path
                                    d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z" />
                            </svg>
                            Add users
                        </button>

                        <div class="modal fade" id="add-users" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">New user</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <select name="" id="">
                                            <%for(const user of users){%>
                                                <option value=""><%=user.username%></option>
                                            <%}%>
                                        </select>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary">Add user</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="scroll-content" >
                <div class="d-flex justify-content-between align-items-start ">
                    <%for (i=0; i < listStatus.length; i++) { %>
                        <div class="col-design  p-2 ">
                            <div class="content-title d-flex justify-content-center">
                                <h5 class="">
                                    <%=listStatus[i].title%>
                                </h5>
                            </div>

                            <div class="todo-body mt-1" style=" overflow-y: auto;height: 50vh;">
                                <%for (const element of listData) { if(element.status==listStatus[i].value){%>
                                    <div class="todo-content ">
                                        <button class="content-btn btn" data-bs-toggle="modal" data-bs-target=".<%=element.status%>">
                                            <span><%=element.title%></span>
                                            <input type="hidden" value="<%=element._id%>">
                                            <input type="hidden" value="<%=element.priority%>">
                                            <%if(element.priority == 0){%>
                                                <svg style="color: red;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="svg-arrow-up bi bi-arrow-up" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                                                  </svg>
                                            <%}%>
                                            <%if(element.priority == 1){%>
                                                <svg style="color: orange;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="svg-arrow-up bi bi-arrow-up" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                                                  </svg>
                                            <%}%>
                                            <%if(element.priority == 2){%>
                                                <svg style="color: rgb(28, 238, 28);" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="svg-arrow-up bi bi-arrow-up" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                                                  </svg>
                                            <%}%>
                                            
                                         
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="svg-pencil bi bi-pencil" viewBox="0 0 16 16">
                                                <path
                                                    d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z" />
                                            </svg>
                                        </button>

                                        <!-- Modal -->
                                        <div class="modal fade <%=element.status %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">

                                                        <h5 class="modal-title" id="exampleModalLabel">Update task</h5>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body ">
                                                        Title: <br>
                                                        <textarea  class="update-title-input mb-2" name="" id="" cols="30" rows="3"></textarea> <br>

                                                        <input class="update-id-input" type="hidden"> Priority: <br>
                                                        <select class="update-priority mb-2" name="priority" id="">    
                                                        </select>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <input type="hidden" value="<%=element.status%>">
                                                        <button class="delete-btn btn btn-danger">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                                                                <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
                                                              </svg>
                                                        </button>

                                                        <button type="button" class="update-btn btn btn-primary">Update</button>
                                                        <div class="dropdown">
                                                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                                              Move
                                                            </button>
                                                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                                              <li><a type="button" class="move-btn-todo dropdown-item"> To ToDo</a></li>
                                                              <li><a type="button" class="move-btn-doing dropdown-item" >To Doing</a></li>
                                                              <li><a type="button" class="move-btn-done dropdown-item">To Done</a></li>
                                                            </ul>
                                                          </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <%}}%>

                                        <button class="modal-btn btn" data-bs-toggle="modal" data-bs-target="#create-todo-task<%=i%>"><svg
                                                xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                                <path
                                                    d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z" />
                                            </svg>
                                            Add another task
                                        </button>

                                        <!-- Modal -->
                                        <div class="modal fade" id="create-todo-task<%=i%>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">New task</h5>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <textarea class="input-content m-2" placeholder="Enter title for this task..."  cols="30" rows="3"></textarea><br>
                                                        <select class="input-priority m-2" name="username">
                                                           <option value=""selected disabled>user who does this task...</option>
                                                           <option value="0">admin1</option>
                                                           <option value="1">admin2</option>
                                                           <option value="2">admin3</option>
                                                       </select> 
                                                        <select class="input-priority m-2" name="priority" id="">
                                                           <option value=""selected disabled>priority...</option>
                                                           <option value="0">High</option>
                                                           <option value="1">Medium</option>
                                                           <option value="2">Low</option>
                                                       </select> 
                                                    </div>
                                                    <div class="modal-footer">
                                                        <input type="hidden" value="<%=listStatus[i].value%>">
                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                        <button type="button" class="create-task-btn btn btn-primary">Create task</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                            </div>
                        </div>
                        <%}%>

                </div>
            </div>
            </div>

        </div>
   
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/public/js/task.js"></script>
<script src="/public/js/logout.js"></script>
<script src="/public/js/changePassword.js"></script>

</html>